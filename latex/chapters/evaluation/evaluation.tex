\section{Evaluation und Ergebnisse}
\label{sec:validation}

\subsection{Vergleich RL vs. Baselines (Gesamtergebnisse)}
Zunächst werden die aggregierten Resultate aller RL-Modelle den beiden Baselines
(\texttt{Fixed-Time}, \texttt{Actuated}) gegenübergestellt.
Betrachtet werden Mittelwerte über alle Seeds, Szenarien und Episoden.
Diese Analyse beantwortet die zentrale Frage, ob die RL-Ansätze gegenüber klassischen Steuerungen einen generellen Vorteil erzielen.

\subsection{Szenarien-spezifische Analyse}
Anschließend erfolgt eine differenzierte Betrachtung nach Verkehrsszenarien
(morning\_peak, evening\_peak, uniform, random\_heavy).
Für jedes Szenario werden die Methoden (\texttt{RL}, \texttt{Baseline\_FixedTime}, \texttt{Baseline\_Actuated})
gegenübergestellt.
So lässt sich bewerten, ob RL insbesondere unter stochastisch hoher Last oder in Spitzenzeiten Vorteile ausspielen kann.

\subsection{Vergleich der Reward-Varianten}
Falls mehrere Reward-Funktionen trainiert wurden, erfolgt hier ein interner Vergleich der RL-Varianten.
Dabei wird untersucht, wie sich unterschiedliche Belohnungsdesigns auf zentrale Kennzahlen
(z.\,B.\ mittlere Geschwindigkeit, Warteschlangenlänge, CO\textsubscript{2}-Emissionen) auswirken.

\subsection{Robustheit und Replikationsanalyse}
Um die Stabilität der Ergebnisse zu bewerten, werden die Verteilungen über:
\begin{itemize}
    \item die 4 Trainingsseeds pro Reward-Funktion,
    \item die 10 Evaluations-Episoden pro Szenario
\end{itemize}
analysiert.
Dies erlaubt Aussagen zur Varianz und zur Reproduzierbarkeit der Ergebnisse.
Boxplots oder Konfidenzintervalle verdeutlichen die Robustheit der Ansätze.

\subsection{Zusammenfassung der Ergebnisse}
Abschließend werden die wichtigsten Beobachtungen zusammengefasst:
\begin{itemize}
    \item Überlegenheit oder Schwächen von RL im Vergleich zu Baselines,
    \item Szenarien, in denen RL besonders profitiert oder Probleme zeigt,
    \item Einflüsse verschiedener Reward-Funktionen,
    \item Stabilität der Ergebnisse über Seeds und Episoden.
\end{itemize}


\begin{tikzpicture}
    \begin{axis}[
            ybar,
            bar width=0.25cm,
            width=14cm,
            height=8cm,
            enlarge x limits=0.15,
            ylabel={Mean Wait},
            xlabel={Scenario},
            symbolic x coords={evening_peak,morning_peak,random_heavy,uniform}, % wie in CSV
            xtick=data,
            xticklabels={evening\_peak,morning\_peak,random\_heavy,uniform},     % Anzeige hübsch
            x tick label style={rotate=45,anchor=east},
            legend style={at={(0.5,-0.2)}, anchor=north, legend columns=-1},
            ymajorgrids=true,
            grid style=dashed
        ]

        % Baseline Actuated
        \addplot+[ybar] table [
                x=scenario, y=mean_wait, col sep=comma,
                row predicate/.code={%
                        \ifnum\pdfstrcmp{\thisrow{method}}{Baseline_Actuated}=0
                        \else \pgfplotstableuserowfalse \fi
                    }
            ] {chapters/evaluation/results/eval_results_agg.csv};
        \addlegendentry{Baseline Actuated}

        % Baseline FixedTime
        \addplot+[ybar] table [
                x=scenario, y=mean_wait, col sep=comma,
                row predicate/.code={%
                        \ifnum\pdfstrcmp{\thisrow{method}}{Baseline_FixedTime}=0
                        \else \pgfplotstableuserowfalse \fi
                    }
            ] {chapters/evaluation/results/eval_results_agg.csv};
        \addlegendentry{Baseline FixedTime}

        % RL
        \addplot+[ybar] table [
                x=scenario, y=mean_wait, col sep=comma,
                row predicate/.code={%
                        \ifnum\pdfstrcmp{\thisrow{method}}{RL}=0
                        \else \pgfplotstableuserowfalse \fi
                    }
            ] {chapters/evaluation/results/eval_results_agg.csv};
        \addlegendentry{RL}

    \end{axis}
\end{tikzpicture}
